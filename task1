import csv

input_file = "API_SP.DYN.LE00.IN_DS2_en_csv_v2_130058.csv"
output_file = "result.csv"

rows = []

with open(input_file, "r", encoding="utf-8") as f:
    reader = csv.reader(f)
    rows = list(reader)

for r in rows:
    print(",".join(r))

ukraine = None

for r in rows:
    if len(r) > 0 and r[0] == "Ukraine":
        ukraine = r
        break

years = rows[4]

start_year = int(input("Введіть початковий рік: "))
end_year = int(input("Введіть кінцевий рік: "))

start_index = years.index(str(start_year))
end_index = years.index(str(end_year))

with open(output_file, "w", encoding="utf-8", newline="") as f:
    writer = csv.writer(f)
    writer.writerow(["Year", "Life expectancy"])
    for i in range(start_index, end_index + 1):
        writer.writerow([years[i], ukraine[i]])

print("Готово! Результат у файлі result.csv")
